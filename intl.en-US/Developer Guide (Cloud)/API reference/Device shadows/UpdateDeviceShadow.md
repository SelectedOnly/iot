# UpdateDeviceShadow

Modifies a device shadow.

## Limits

Each Alibaba Cloud account can run a maximum of 500 queries per second \(QPS\).

**Note:** RAM users of an Alibaba Cloud account share the quota of the account.

## Debugging

[OpenAPI Explorer automatically calculates the signature value. For your convenience, we recommend that you call this operation in OpenAPI Explorer. OpenAPI Explorer dynamically generates the sample code of the operation for different SDKs.](https://api.aliyun.com/#product=Iot&api=UpdateDeviceShadow&type=RPC&version=2018-01-20)

## Request parameters

|Parameter|Type|Required|Example|Description|
|---------|----|--------|-------|-----------|
|Action|String|Yes|UpdateDeviceShadow|The operation that you want to perform. Set the value to UpdateDeviceShadow. |
|DeviceName|String|Yes|device1|The name of the device whose shadow information that you want to modify. |
|ProductKey|String|Yes|a1T27vz\*\*\*\*|The key of the product to which the device belongs. |
|ShadowMessage|String|Yes|\{"method":"update","state":\{"desired":\{"color":"green"\}\},"version":2\}|The expected shadow information.

The shadow information includes the following parameters:

-   **method**: a string that specifies the operation type. Valid value: **update**.
-   **state**: a string that specifies the expected shadow information. The **desired** parameter includes the details of settings.
-   **version**: a LONG value that specifies the version of the shadow. The specified version must be greater than the current version. |
|IotInstanceId|String|No|iot\_instc\_pu\*\*\*\*\_c\*-v64\*\*\*\*\*\*\*\*|The ID of the instance. This parameter is not required for public instances. However, the parameter is required for the instances that you have purchased. |
|DeltaUpdate|Boolean|No|false|Specifies whether to update the **desired** parameters of the shadow.

-   true: to perform an incremental update.
-   false: to perform a full update.

Default value: false. |

In addition to the preceding API operation-specific request parameters, you must specify common request parameters when you call this API operation. For more information, see [Common parameters](~~30561~~).

## Response parameters

|Parameter|Type|Example|Description|
|---------|----|-------|-----------|
|Code|String|iot.system.SystemException|The error code returned if the call fails. For more information, see [Error codes](~~87387~~). |
|ErrorMessage|String|A system exception occurred.|The error message returned if the call fails. |
|RequestId|String|6754C0E7-A35D-4CC8-A684-45EB1F0008D9|The GUID that is generated by IoT Platform for the request. |
|Success|Boolean|true|Indicates whether the call succeeds. **true** indicates that the call succeeds. **false** indicates that the call fails. |

## Examples

Sample requests

```
https://iot.cn-shanghai.aliyuncs.com/?Action=UpdateDeviceShadow
&ProductKey=a1T27vz****
&DeviceName=device1
&ShadowMessage={"method":"update","state":{"desired":{"color":"green"}},"version":1}
&<Common request parameters>
```

Sample success responses

`XML` format

```
<UpdateDeviceShadowResponse>
        <RequestId>BB71E443-4447-4024-A000-EDE09922891E</RequestId>
        <Success>true</Success>
  </UpdateDeviceShadowResponse>
```

`JSON` format

```
{
    "RequestId": "6754C0E7-A35D-4CC8-A684-45EB1F0008D9",
    "Success": true
}
```

## Error codes

For a list of error codes, visit the [API Error Center](https://error-center.alibabacloud.com/status/product/Iot).

